{"ast":null,"code":"import _regeneratorRuntime from\"/Users/user/Desktop/Todo-App/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/user/Desktop/Todo-App/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/user/Desktop/Todo-App/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import{useEffect,useReducer}from'react';import{BrowserRouter,Route,Routes}from'react-router-dom';import Active from'./components/Active';import Completed from'./components/Completed';import AllTask from'./components/AllTask';import Layout from'./components/Layout';import TaskContext from'./context/TaskContext';import TokenContext from'./context/TokenContext';import taskReducer from'./reducer/taskReducer';import tokenReducer from'./reducer/tokenReducer';import userReducer from'./reducer/userReducer';import Header from'./components/Header/Header';import Login from'./components/Login';import Register from'./components/Register';import ForgotPassword from'./components/forgotPassword/ForgotPassword';import ResetPassword from'./components/forgotPassword/ResetPassword';import axios from'./Axios/axios.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var token=JSON.parse(localStorage.getItem(\"authToken\"));var _useReducer=useReducer(taskReducer,[]),_useReducer2=_slicedToArray(_useReducer,2),tasks=_useReducer2[0],dispatch=_useReducer2[1];var _useReducer3=useReducer(tokenReducer,token),_useReducer4=_slicedToArray(_useReducer3,2),userToken=_useReducer4[0],tokenDispatch=_useReducer4[1];var _useReducer5=useReducer(userReducer,{}),_useReducer6=_slicedToArray(_useReducer5,2),user=_useReducer6[0],userDispatch=_useReducer6[1];useEffect(function(){console.log(\"App.js\");var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;console.log(\"fetchUser\");_context.next=4;return axios.get(\"/user/getUser\",{headers:{Authorization:\"Bearer \".concat(userToken)}});case 4:res=_context.sent;//tokenDispatch({type: \"SET_TOKEN\", payload: res.token})\nconsole.log(\"res.data: \",res.data);userDispatch({type:\"SET_USER\",payload:res.data.user});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function fetchUser(){return _ref.apply(this,arguments);};}();if(userToken){fetchUser();}},[userToken]);useEffect(function(){var fetchTasks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;console.log(\"fetchTasks\");_context2.next=4;return axios.get(\"/task/getTask\",{headers:{Authorization:\"Bearer \".concat(userToken)}});case 4:res=_context2.sent;dispatch({type:\"SET_TASK\",payload:res.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function fetchTasks(){return _ref2.apply(this,arguments);};}();if(userToken){fetchTasks();}},[userToken]);return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(TokenContext.Provider,{value:{userToken:userToken,tokenDispatch:tokenDispatch,user:user,userDispatch:userDispatch},children:/*#__PURE__*/_jsx(TaskContext.Provider,{value:{tasks:tasks,dispatch:dispatch},children:/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Header,{}),children:[/*#__PURE__*/_jsxs(Route,{path:\"/\",element:token?/*#__PURE__*/_jsx(Layout,{}):/*#__PURE__*/_jsx(Login,{}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(AllTask,{})}),/*#__PURE__*/_jsx(Route,{path:\"active\",element:/*#__PURE__*/_jsx(Active,{})}),/*#__PURE__*/_jsx(Route,{path:\"completed\",element:/*#__PURE__*/_jsx(Completed,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/forgotPassword\",element:/*#__PURE__*/_jsx(ForgotPassword,{})}),/*#__PURE__*/_jsx(Route,{path:\"/resetPassword\",element:/*#__PURE__*/_jsx(ResetPassword,{})})]})})})})});}export default App;","map":{"version":3,"names":["useEffect","useReducer","BrowserRouter","Route","Routes","Active","Completed","AllTask","Layout","TaskContext","TokenContext","taskReducer","tokenReducer","userReducer","Header","Login","Register","ForgotPassword","ResetPassword","axios","App","token","JSON","parse","localStorage","getItem","tasks","dispatch","userToken","tokenDispatch","user","userDispatch","console","log","fetchUser","get","headers","Authorization","res","data","type","payload","fetchTasks"],"sources":["/Users/user/Desktop/Todo-App/frontend/src/App.js"],"sourcesContent":["import './App.css';\nimport { useEffect, useReducer } from 'react';\nimport { BrowserRouter, Route, Routes } from 'react-router-dom';\nimport Active from './components/Active';\nimport Completed from './components/Completed';\nimport AllTask from './components/AllTask';\nimport Layout from './components/Layout';\nimport TaskContext from './context/TaskContext';\nimport TokenContext from './context/TokenContext';\nimport taskReducer from './reducer/taskReducer';\nimport tokenReducer from './reducer/tokenReducer';\nimport userReducer from './reducer/userReducer';\nimport Header from './components/Header/Header';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport ForgotPassword from './components/forgotPassword/ForgotPassword';\nimport ResetPassword from './components/forgotPassword/ResetPassword';\nimport axios from './Axios/axios.js';\nfunction App() {\n  const token = JSON.parse(localStorage.getItem(\"authToken\"));\n  const [tasks, dispatch] = useReducer(taskReducer, [])\n  const [userToken, tokenDispatch] = useReducer(tokenReducer, token)\n  const [user, userDispatch] = useReducer(userReducer, {})\n  useEffect(() => {\n    console.log(\"App.js\");\n    const fetchUser = async () => {\n      try {\n        console.log(\"fetchUser\");\n        const res = await axios.get(\"/user/getUser\",{\n          headers: {\n            Authorization: `Bearer ${userToken}`\n          }\n        })\n        //tokenDispatch({type: \"SET_TOKEN\", payload: res.token})\n        console.log(\"res.data: \", res.data);\n        userDispatch({type: \"SET_USER\", payload:res.data.user})\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    if (userToken) {\n      fetchUser()\n    }\n  },[userToken])\n  useEffect(() => {\n    const fetchTasks = async () => {\n      try {\n        console.log(\"fetchTasks\");\n        const res = await axios.get(\"/task/getTask\", {\n          headers: {\n            Authorization: `Bearer ${userToken}`\n          }\n        })\n        dispatch({ type: \"SET_TASK\", payload: res.data })\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    if (userToken) {\n      fetchTasks()\n    }\n  },[userToken])\n  return (\n    <BrowserRouter>\n      <TokenContext.Provider value={{userToken, tokenDispatch, user, userDispatch}}>\n        <TaskContext.Provider value={{ tasks, dispatch }}>\n          <Routes>\n            <Route path=\"/\" element={<Header />}>\n              <Route path='/' element={token ? <Layout /> : <Login />}>\n                <Route index element={<AllTask />} />\n                <Route path=\"active\" element={<Active />} />\n                <Route path=\"completed\" element={<Completed />} />\n              </Route>\n              <Route path=\"/login\" element={<Login />} />\n              <Route path=\"/register\" element={<Register />} />\n              <Route path=\"/forgotPassword\" element={<ForgotPassword />} />\n              <Route path=\"/resetPassword\" element={<ResetPassword />} />\n            </Route>\n          </Routes>\n        </TaskContext.Provider>\n      </TokenContext.Provider>\n\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}